#!/bin/bash
#SBATCH --job-name=segmentation
#SBATCH --ntasks=5
#SBATCH --gres=gpu:5
#SBATCH --time=4320
#SBATCH --output test_five_script_train_for_output.txt

/bin/hostname


for numclass in 6 5
do
for nwseed in 42 1110977501 1585192873 631065281 1518333031 1076678475 1849186049 1200396012 2106040086 1328711545 1052071749 1341828839 588842861 1402860055 257319806 2044770374 1867787258 749859941 468191443 1313915954
do

while [ "$(jobs -p | wc -l)" -ge "$SLURM_NTASKS" ]; do
    sleep 150
done
srun -n 1 --time=4320 --gres=gpu:1 --ntasks=1 python3.11 /common/home/vasyliev_e/dl/UnetEPFL_v2/pytorchv3/trainer.py -c "segmentation/configs/segmentation_stability/config_synt_and_diffusion_6_classes_only_real.json" -s -uc --seed ${nwseed} --num_classes ${numclass} > "five_script_trainer_output_${nwseed}_${numclass}.txt" &

done
done
wait

for numclass in 6 5
do
for nwseed in 42 1110977501 1585192873 631065281 1518333031 1076678475 1849186049 1200396012 2106040086 1328711545 1052071749 1341828839 588842861 1402860055 257319806 2044770374 1867787258 749859941 468191443 1313915954
do

while [ "$(jobs -p | wc -l)" -ge "$SLURM_NTASKS" ]; do
    sleep 150
done
srun -n 1 --time=4320 --gres=gpu:1 --ntasks=1 python3.11 /common/home/vasyliev_e/dl/UnetEPFL_v2/pytorchv3/trainer.py -c "segmentation/configs/segmentation_stability/config_synt_and_diffusion_6_classes_only_real_no_augment.json" -s -uc --seed ${nwseed} --num_classes ${numclass} > "five_script_trainer_output_${nwseed}_${numclass}_no_augment.txt" &

done
done
wait













