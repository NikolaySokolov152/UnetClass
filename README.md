# Проект по работе с моделью Unet
- используется для сегментации снимков мозга мыши, полученного при помощи электронного микроскопа
- используется для генерации снимков электронного микроскопа при помощи диффузионной модели

## Краткое описание

Последняя версия проекта - pytorch

Для диффузионных моделей используется с крипты с припиской "_dif" (например trainer_dif.py)

Для запуска одиночного обучения нужно передать конфигурационный файл тренировки в trainer.py при помощи аргумента -с <config.json>. 
При помощи аргументов также можно изменять некоторые параметры тренировки (они приоритетнее указанных в конфиге).

> python3.11 trainer.py -c segmentation/configs/proportion_data/config_proportion.json

Для запуска серии обучения с разными параметрами нужно передать конфигурационный файл с изменяемыми параметрами и путем до конфига тренировки в trainSeriesExpts.py при помощи аргумента -с

> python3.11 trainSeriesExpts.py -c "segmentation/configs/syntetic_diffusion/multi_config_test_only_synt_6_classes.json" -s > "five_script_output_5.txt"


Примечание для запуска на сервере (кластере):
1. При использовании перенаправлении вывода печати в текстовый файл нужно добавить аргумент  -s, который отключает печать полос прогресса tqdm.
2. Приоритетнее использовать команды запуска, которые не требуют постоянного подключения к серверу (srun), а ставящие выполнение во внутреннюю очередь (sbatch). В ином случае есть вероятность остановки выполнения кода вызванным разрывом соединения с сервером.
3. Примеры скриптов для sbatch лежат в pytorch/sbatch_scripts


## Напоминалка
Внутри директорий "segmentation", "diffusion" и "img2img" находятся сырые вспомогательные скриптов (Не забыть привести в читаемый вид).

